<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.1" xmlns="http://xmlns.jcp.org/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd">
    <!-- Session settings -->
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>

    <!-- DB SETTINGS -->
    <context-param>
        <description>The url of the JDBC persistence system database position</description>
        <param-name>dburl</param-name>
        <param-value>jdbc:mysql://127.0.0.1:3306/mydb</param-value>
    </context-param>
    <context-param>
        <description>The user of the JDBC persistence system database position</description>
        <param-name>dbuser</param-name>
        <param-value>root</param-value>
    </context-param>
    <context-param>
        <description>The password of $dbuser</description>
        <param-name>dbpwd</param-name>
        <param-value>passworddacambiare</param-value>
    </context-param>

    <!-- SMTP SETTINGS -->
    <context-param>
        <description>Hostname of the SMTP server</description>
        <param-name>smtpHostname</param-name>
        <param-value>smtp.gmail.com</param-value>
    </context-param>
    <context-param>
        <description>Port of the SMTP server</description>
        <param-name>smtpPort</param-name>
        <param-value>465</param-value>
    </context-param>
    <context-param>
        <description>Username of the SMTP server</description>
        <param-name>smtpUsername</param-name>
        <param-value>registrazioneprogettowebprog@gmail.com</param-value>
    </context-param>
    <context-param>
        <description>Password of the SMTP server</description>
        <param-name>smtpPassword</param-name>
        <param-value>xeecaoS5tood3bee</param-value>
    </context-param>

    <!-- AVATAR SETTINGS -->
    <context-param>
        <description>Path of the folder where avatars are stored</description>
        <param-name>avatarsFolder</param-name>
        <param-value>img/avatars</param-value>
    </context-param>

    <!-- LISTENERS -->
    <listener>
        <description>ServletContextListener</description>
        <listener-class>it.unitn.webprogramming18.dellmm.listeners.WebAppContextListener</listener-class>
    </listener>

    <!-- FILTERS -->
    <filter>
        <filter-name>LoggedUserOnlyFilter</filter-name>
        <filter-class>it.unitn.webprogramming18.dellmm.filters.LoggedUserOnlyFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>LoggedUserOnlyFilter</filter-name>
        <url-pattern>/loggedResetPassword</url-pattern>
        <url-pattern>/modifyUser</url-pattern>
        <url-pattern>/resendEmail</url-pattern>
        <url-pattern>/alreadyLoggedIn</url-pattern>
        <url-pattern>/notifications</url-pattern>
        <url-pattern>/notifications.json</url-pattern>
    </filter-mapping>

    <filter>
        <filter-name>UnloggedUserOnlyFilter</filter-name>
        <filter-class>it.unitn.webprogramming18.dellmm.filters.UnloggedUserOnlyFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>UnloggedUserOnlyFilter</filter-name>
        <url-pattern>/login</url-pattern>
        <url-pattern>/register</url-pattern>
        <url-pattern>/forgotPassword</url-pattern>
        <url-pattern>/resetPassword</url-pattern>
    </filter-mapping>

    <!-- SERVLETS -->
    <servlet>
        <servlet-name>DisplaySpecificListServlet</servlet-name>
        <servlet-class>it.unitn.webprogramming18.dellmm.servlets.DisplaySpecificListServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>DisplaySpecificListServlet</servlet-name>
        <url-pattern>/DisplaySpecificListServlet</url-pattern>
    </servlet-mapping>

    <servlet>
        <servlet-name>PrepareAddUpdateListPageServlet</servlet-name>
        <servlet-class>it.unitn.webprogramming18.dellmm.servlets.PrepareAddUpdateListPageServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>PrepareAddUpdateListPageServlet</servlet-name>
        <url-pattern>/PrepareAddUpdateListPageServlet</url-pattern>
    </servlet-mapping>

    <servlet>
        <servlet-name>AddUpdateListServlet</servlet-name>
        <servlet-class>it.unitn.webprogramming18.dellmm.servlets.AddUpdateListServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>AddUpdateListServlet</servlet-name>
        <url-pattern>/AddUpdateListServlet</url-pattern>
    </servlet-mapping>

    <servlet>
        <servlet-name>PrepareAddUpdateProductServlet</servlet-name>
        <servlet-class>it.unitn.webprogramming18.dellmm.servlets.PrepareAddUpdateProductPageServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>PrepareAddUpdateProductServlet</servlet-name>
        <url-pattern>/PrepareAddUpdateProductServlet</url-pattern>
    </servlet-mapping>

    <servlet>
        <servlet-name>AddUpdateProductServlet</servlet-name>
        <servlet-class>it.unitn.webprogramming18.dellmm.servlets.AddUpdateProductServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>AddUpdateProductServlet</servlet-name>
        <url-pattern>/AddUpdateProductServlet</url-pattern>
    </servlet-mapping>

    <servlet>
        <servlet-name>UpgradeUserToAdminServlet</servlet-name>
        <servlet-class>it.unitn.webprogramming18.dellmm.servlets.UpgradeUserToAdminServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>UpgradeUserToAdminServlet</servlet-name>
        <url-pattern>/UpgradeUserToAdminServlet</url-pattern>
    </servlet-mapping>


    <servlet>
        <servlet-name>DisplayListsServlet</servlet-name>
        <servlet-class>it.unitn.webprogramming18.dellmm.servlets.DisplayListsServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>DisplayListsServlet</servlet-name>
        <url-pattern>/DisplayListsServlet</url-pattern>
    </servlet-mapping>

    <servlet>
        <servlet-name>LoginServlet</servlet-name>
        <servlet-class>it.unitn.webprogramming18.dellmm.servlets.userSystem.LoginServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>LoginServlet</servlet-name>
        <url-pattern>/login</url-pattern>
    </servlet-mapping>
    <servlet>
        <servlet-name>LogoutServlet</servlet-name>
        <servlet-class>it.unitn.webprogramming18.dellmm.servlets.userSystem.LogoutServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>LogoutServlet</servlet-name>
        <url-pattern>/logout</url-pattern>
    </servlet-mapping>

    <servlet>
        <servlet-name>RegisterServlet</servlet-name>
        <servlet-class>it.unitn.webprogramming18.dellmm.servlets.userSystem.RegisterServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>RegisterServlet</servlet-name>
        <url-pattern>/register</url-pattern>
    </servlet-mapping>
    
    <servlet>
        <servlet-name>ResendEmailServlet</servlet-name>
        <servlet-class>it.unitn.webprogramming18.dellmm.servlets.userSystem.ResendEmailServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>ResendEmailServlet</servlet-name>
        <url-pattern>/resendEmail</url-pattern>
    </servlet-mapping>
    
    <servlet>
        <servlet-name>ValidateUserServlet</servlet-name>
        <servlet-class>it.unitn.webprogramming18.dellmm.servlets.userSystem.ValidateUserServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>ValidateUserServlet</servlet-name>
        <url-pattern>/validateUser</url-pattern>
    </servlet-mapping>

    <servlet>
        <servlet-name>ForgotPasswordServlet</servlet-name>
        <servlet-class>it.unitn.webprogramming18.dellmm.servlets.userSystem.ForgotPasswordServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>ForgotPasswordServlet</servlet-name>
        <url-pattern>/forgotPassword</url-pattern>
    </servlet-mapping>

    <servlet>
        <servlet-name>ResetPasswordServlet</servlet-name>
        <servlet-class>it.unitn.webprogramming18.dellmm.servlets.userSystem.ResetPasswordServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>ResetPasswordServlet</servlet-name>
        <url-pattern>/resetPassword</url-pattern>
    </servlet-mapping>

    <servlet>
        <servlet-name>ModifyUserServlet</servlet-name>
        <servlet-class>it.unitn.webprogramming18.dellmm.servlets.userSystem.ModifyUserServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>ModifyUserServlet</servlet-name>
        <url-pattern>/modifyUser</url-pattern>
    </servlet-mapping>

    <servlet>
        <servlet-name>LoggedResetPasswordServlet</servlet-name>
        <servlet-class>it.unitn.webprogramming18.dellmm.servlets.userSystem.LoggedResetPasswordServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>LoggedResetPasswordServlet</servlet-name>
        <url-pattern>/loggedResetPassword</url-pattern>
    </servlet-mapping>

    <servlet>
        <servlet-name>AlreadyLoggedInServlet</servlet-name>
        <servlet-class>it.unitn.webprogramming18.dellmm.servlets.userSystem.AlreadyLoggedInServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>AlreadyLoggedInServlet</servlet-name>
        <url-pattern>/alreadyLoggedIn</url-pattern>
    </servlet-mapping>
    
    <servlet>
        <servlet-name>NotificationsServlet</servlet-name>
        <servlet-class>it.unitn.webprogramming18.dellmm.servlets.NotificationsServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>NotificationsServlet</servlet-name>
        <url-pattern>/notifications</url-pattern>
    </servlet-mapping>

    <servlet>
        <servlet-name>NotificationsServletJSON</servlet-name>
        <servlet-class>it.unitn.webprogramming18.dellmm.servlets.JSONNotificationsServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>NotificationsServletJSON</servlet-name>
        <url-pattern>/notifications.json</url-pattern>
    </servlet-mapping>
</web-app>
